window.bt_bb_map={};window.bt_bb_map_primary={};window.bt_bb_map_secondary={};(function(b){b(document).ready(function(){window.bt_bb_mouse={};window.bt_bb_drag_item=null;if(b("#bt_bb").length>0){if(window.bt_bb_data.children.length>0){if(window.bt_bb_map[window.bt_bb_data.children[0].base]===undefined||window.bt_bb_map[window.bt_bb_data.children[0].base].root!==true){window.bt_bb_data.children=[];window.bt_bb.is_bb_content=false}}}if(b("#postdivrich").length>0&&b("#bt_bb").length>0){b("#postdivrich").before('<div id="bt_bb_editor_toolbar"></div>');if(window.bt_bb.is_bb_content){window.bt_bb.editor="bb";b("#postdivrich").addClass("bt_bb_hidden");b("#bt_bb_editor_toolbar").addClass("bt_bb_is_bb_editor")}else{window.bt_bb.editor="wp";b("#bt_bb_sectionid").hide()}var t=window.bt_bb.editor=="bb"?true:false;b("#bt_bb_editor_toolbar").html('<button type="button" class="button bt_bb_switch_editor">'+window.bt_bb_text.switch_editor+'</button> <button type="button" class="button bt_bb_custom_css" disabled>'+window.bt_bb_text.custom_css+"</button>");var _={action:"bt_bb_get_custom_css",post_id:b("#post_ID").val()};b.ajax({type:"POST",url:window.BTAJAXURL,data:_,async:true,success:function(_){window.bt_bb_custom_css=window.btoa(_);if(t){b(".bt_bb_custom_css").removeAttr("disabled")}}})}b("#publish, #post-preview, #save-post").on("click",function(t){if(window.bt_bb.editor=="bb"){b("#bt_bb_front_end_preview iframe").remove();b("#bt_bb_front_end_preview").append('<iframe name="bt_bb_front_end_preview_iframe"></iframe>');b("#bt_bb_front_end_preview").hide();window.bt_bb_action="update_wp_editor";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")}});window.bt_bb_item_mousedown=function(){b(".bt_bb_item").each(function(){b(this).unbind("mousedown");b(this).on("mousedown",function(t){t.stopPropagation();var _=this.getBoundingClientRect();var i=t.clientX-_.left;var e=t.clientY-_.top;window.bt_bb_mouse.initOffsetX=i;window.bt_bb_mouse.initOffsetY=e;window.bt_bb_action=null;window.bt_bb_drag_item=b(this);b(".bt_bb_toolbar_tools_visible").removeClass("bt_bb_toolbar_tools_visible");var o=b(this).parent()[0].getBoundingClientRect();b(this).parent().css("height",o["height"]);b(this).parent().addClass("bt_bb_wrap_drag");b(this).addClass("bt_bb_drag");b(this).find(".bt_bb_horizontal").css("height","auto");b(this).find(".bt_bb_width .bt_bb_item").css("height","auto");b(this).css("width",b(this).width());if(!b(this).hasClass("bt_bb_toggled")){o=b(this)[0].getBoundingClientRect();b(this).css("height",o["height"])}b(this).css("position","fixed");b(this).css("zIndex","100000");b(this).css("top",bt_bb_mouse.y-bt_bb_mouse.initOffsetY);b(this).css("left",bt_bb_mouse.x-bt_bb_mouse.initOffsetX)})})};bt_bb_item_mousedown();b(document).mouseup(function(t){b(".bt_bb_marker").removeClass("bt_bb_marker");if(window.bt_bb_drag_item!=null){window.bt_bb_dialog.hide();b(".bt_bb_toolbar_tools").css("opacity","");if(window.bt_bb_action!=null&&window.bt_bb_action.startsWith("move")){window.bt_bb_ctrl=t.ctrlKey;bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")}window.bt_bb_drag_item.parent().css("height","");window.bt_bb_drag_item.parent().removeClass("bt_bb_wrap_drag");window.bt_bb_drag_item.removeClass("bt_bb_drag");window.bt_bb_drag_item.find(".bt_bb_horizontal").css("height","");window.bt_bb_drag_item.find(".bt_bb_width .bt_bb_item").css("height","");window.bt_bb_drag_item.css("position","");window.bt_bb_drag_item.css("zIndex","");window.bt_bb_drag_item.css("opacity","");window.bt_bb_drag_item.css("width","");if(!window.bt_bb_drag_item.hasClass("bt_bb_toggled")){window.bt_bb_drag_item.css("height","")}window.bt_bb_drag_item.css("top","");window.bt_bb_drag_item.css("left","")}window.bt_bb_drag_item=null});b(document).mousemove(function(t){bt_bb_mouse.x=t.clientX;bt_bb_mouse.y=t.clientY;if(window.bt_bb_drag_item!=null){window.bt_bb_drag_item.css("top",bt_bb_mouse.y-bt_bb_mouse.initOffsetY);window.bt_bb_drag_item.css("left",bt_bb_mouse.x-bt_bb_mouse.initOffsetX);var _=bt_bb_get_action();b(".bt_bb_marker").removeClass("bt_bb_marker bt_bb_marker_up bt_bb_marker_down bt_bb_marker_left bt_bb_marker_right bt_bb_marker_inside");if(window.bt_bb_action!=null){if(_[1]=="up"){_[0].addClass("bt_bb_marker bt_bb_marker_up")}else if(_[1]=="down"){_[0].addClass("bt_bb_marker bt_bb_marker_down")}else if(_[1]=="left"){_[0].addClass("bt_bb_marker bt_bb_marker_left")}else if(_[1]=="right"){_[0].addClass("bt_bb_marker bt_bb_marker_right")}else if(_[1]=="inside"){_[0].addClass("bt_bb_marker bt_bb_marker_inside")}}}});b(document).on("mouseover","#bt_bb_dialog",function(t){t.stopPropagation();window.bt_bb_dialog.is_mouseover=true;b(".bt_bb_toolbar_tools_visible").removeClass("bt_bb_toolbar_tools_visible")});b(document).on("mouseleave","#bt_bb_dialog",function(b){window.bt_bb_dialog.is_mouseover=false});b("#bt_bb_add_root").click(function(b){b.preventDefault();window.bt_bb_dialog.hide();window.bt_bb_action="add_root";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b("#bt_bb_main_toolbar .bt_bb_undo").click(function(b){bt_bb_undo()});b("#bt_bb_main_toolbar .bt_bb_redo").click(function(b){bt_bb_redo()});b("#bt_bb_main_toolbar .bt_bb_paste_root").click(function(b){bt_bb_paste_main_toolbar()});b("#bt_bb_main_toolbar .bt_bb_manage_clipboard").click(function(b){window.bt_bb_dialog.hide();window.bt_bb_dialog.show("manage_cb")});b("#bt_bb_main_toolbar .bt_bb_sc_mapper").click(function(b){window.bt_bb_dialog.hide();window.bt_bb_dialog.show("sc_mapper")});b("#bt_bb_editor_toolbar .bt_bb_switch_editor").click(function(t){if(window.bt_bb.editor=="bb"){window.bt_bb.editor="wp";window.bt_bb_action="update_wp_editor";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event");b("#postdivrich").removeClass("bt_bb_hidden");b("#bt_bb_sectionid").hide();b("#postdivrich").hide().show(0);b(this).parent().removeClass("bt_bb_is_bb_editor");b(".bt_bb_custom_css").attr("disabled","")}else{if(confirm(window.bt_bb_text.switch_editor_confirm)){window.bt_bb.editor="bb";b("#postdivrich").addClass("bt_bb_hidden");b("#bt_bb_sectionid").show(0);b(this).parent().addClass("bt_bb_is_bb_editor");b(".bt_bb_custom_css").removeAttr("disabled")}}});b("#bt_bb_editor_toolbar .bt_bb_custom_css").click(function(b){window.bt_bb_dialog.hide();window.bt_bb_dialog.show("custom_css")});b("#bt_bb_main_toolbar .bt_bb_preview").click(function(t){b("#post-preview").click()});b("#bt_bb_main_toolbar .bt_bb_save").click(function(t){b("#publish").click()});window.bt_bb_toolbar=function(){b(document).unbind("keydown.bt_bb");b(document).unbind("keyup.bt_bb");b(".bt_bb_toolbar").unbind("mouseover");b(".bt_bb_toolbar").unbind("mouseout");b(".bt_bb_toolbar i").unbind("mousedown");b(".bt_bb_toolbar i").unbind("click");b(".bt_bb_toolbar i").mousedown(function(b){b.stopPropagation()});b(".bt_bb_toolbar .bt_bb_order").mousedown(function(b){b.stopPropagation()});b(".bt_bb_toolbar .bt_bb_toggle").click(function(t){if(b(this).closest(".bt_bb_item").hasClass("bt_bb_toggled")){b(this).closest(".bt_bb_item").removeClass("bt_bb_toggled");b(this).closest(".bt_bb_item").css("height","")}else{b(this).closest(".bt_bb_item").addClass("bt_bb_toggled");b(this).closest(".bt_bb_item").css("height",b(this).parent().height()+window.bt_bb.padding*2)}});b(".bt_bb_toolbar .bt_bb_delete").click(function(t){window.bt_bb_action="delete";window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_add").click(function(t){t.preventDefault();window.bt_bb_dialog.hide();if(b(this).closest(".bt_bb_item").data("container")=="horizontal"){window.bt_bb_action="add_horizontal"}else{window.bt_bb_action="add"}window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");window.bt_bb_base=b(this).closest(".bt_bb_item").data("base");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_edit").click(function(t){t.preventDefault();window.bt_bb_dialog.hide();window.bt_bb_action="edit";window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");window.bt_bb_base=b(this).closest(".bt_bb_item").data("base");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_clone").click(function(t){t.preventDefault();window.bt_bb_action="clone";window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_copy").click(function(t){t.preventDefault();window.bt_bb_action="copy";window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_copy_plus").click(function(t){t.preventDefault();window.bt_bb_action="copy_plus";window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_paste").click(function(t){t.preventDefault();window.bt_bb_action="paste";window.bt_bb_from=b(this).closest(".bt_bb_item").parent().data("reactid");bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")});b(".bt_bb_toolbar .bt_bb_order").click(function(t){t.preventDefault();var _=b(this).find(".bt_bb_order_inner").html();b("#bt_bb_front_end_preview").show();b("#bt_bb_front_end_preview").append('<div class="bt_bb_front_end_preview_loading"><div class="bt_bb_fe_loader"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div><!-- /bt_bb_fe_loader --></div>');b("#bt_bb_front_end_preview iframe").remove();b("#bt_bb_front_end_preview").append('<iframe name="bt_bb_front_end_preview_iframe"></iframe>');b("#bt_bb_front_end_preview iframe").css("opacity","0");b("#bt_bb_front_end_preview iframe").load(function(){var t;t=b("#bt_bb_front_end_preview iframe").contents();t.find("#wpadminbar").hide();t.find("html").attr("style","margin-top: 0px !important");t.find("body").removeClass("admin-bar");t.find("body").imagesLoaded().always(function(i){b("#bt_bb_front_end_preview .bt_bb_front_end_preview_loading").remove();var e=t.find(".bt_bb_fe_wrap");var o=[];e.each(function(b,t){if(t.closest(".menu")===null){o.push(t)}});t.find("html, body").scrollTop(b(o[_-1]).offset().top);b("#bt_bb_front_end_preview iframe").css("opacity","1")})});window.bt_bb_resize_front_end_preview();window.bt_bb_action="update_wp_editor";bt_bb_dispatch(".bt_bb_item_list","bt_bb_event");var i=b("form#post");var e=b("input#wp-preview");var o="bt_bb_front_end_preview_iframe";var n=navigator.userAgent.toLowerCase();if(wp.autosave){wp.autosave.server.tempBlockSave()}e.val("dopreview");i.attr("target",o).submit().attr("target","");if(n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1){i.attr("action",function(b,t){return t+"?t="+(new Date).getTime()})}e.val("")});b(".bt_bb_front_end_preview_close").click(function(t){b("#bt_bb_front_end_preview").hide()})};window.bt_bb_toolbar();if(b("#bt_bb").length>0){window.bt_bb_init_number_items()}function i(b){var t=window.location.href;b=b.replace(/[\[\]]/g,"\\$&");var _=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)");var i=_.exec(t);if(!i)return null;if(!i[2])return"";return decodeURIComponent(i[2].replace(/\+/g," "))}b(document).on("ready",function(){if(Number.isInteger(parseInt(i("bt_bb_order")))){var t=parseInt(i("bt_bb_order"));setTimeout(function(){b("html, body").scrollTop(b(".bt_bb_order").eq(t-1).offset().top-b("#wpadminbar").height()-24)},500)}})});window.bt_bb_get_action=function(){var t=bt_bb_mouse.x;var _=bt_bb_mouse.y;window.bt_bb_action=null;var i=null;var e=null;if(!bt_bb_point_coll(bt_bb_drag_item.parent(),t,_)){var o=bt_bb_get_closest(b(".bt_bb_item").not(".bt_bb_drag").not(".bt_bb_drag .bt_bb_item"),t,_);if(o!=null){var n=bt_bb_get_position(o);window.bt_bb_from=bt_bb_drag_item.parent().data("reactid");window.bt_bb_to=o.parent().data("reactid");var a=bt_bb_drag_item.data("base");if(n=="inside"){var r=o.data("base");var s=o}else{var r=o.parent().closest(".bt_bb_item").data("base");var s=o.parent().closest(".bt_bb_item")}i=o;var d=false;if(o.parent().parent().hasClass("bt_bb_item_list")&&n!="inside"){if(window.bt_bb_map[a]!==undefined&&window.bt_bb_map[a].root===true){d=true}else{d=false}}else if(window.bt_bb_map[r]===undefined||window.bt_bb_map[r].accept===undefined){d=false}else if(window.bt_bb_map[r].accept[a]===true){d=true}else if(window.bt_bb_map[r].accept[a]===false){d=false}else if(window.bt_bb_map[r].accept_all===true){d=true}else if(window.bt_bb_map[r].accept_all===false){d=false}if(s.find(".bt_bb_horizontal").length>0){if(s.find(".bt_bb_horizontal")[0].children.length>=12){d=false}}if(d){if(n=="down"){window.bt_bb_action="move_down";e="down";if(i.parent().hasClass("bt_bb_width"))e="right"}else if(n=="up"){window.bt_bb_action="move_up";e="up";if(i.parent().hasClass("bt_bb_width"))e="left"}else if(n=="left"){window.bt_bb_action="move_up";e="up";if(i.parent().hasClass("bt_bb_width"))e="left"}else if(n=="right"){window.bt_bb_action="move_down";e="down";if(i.parent().hasClass("bt_bb_width"))e="right"}else if(n=="inside"){window.bt_bb_action="move_inside";e="inside"}}}}var l=[i,e];return l};window.bt_bb_point_coll=function(t,_,i){var e=t.offset().top-b(window).scrollTop();var o=t.offset().left;var n=t.innerWidth();var a=t.innerHeight();return bt_bb_point_coll_base(e,o,n,a,_,i)};window.bt_bb_point_coll_top=function(t,_,i){var e=t.offset().top-b(window).scrollTop();var o=t.offset().left;var n=t.innerWidth();var a=t.find(".bt_bb_toolbar").height()+window.bt_bb.padding*2;return bt_bb_point_coll_base(e,o,n,a,_,i)};window.bt_bb_point_coll_base=function(b,t,_,i,e,o){var n=[t,t,t+_,t+_];var a=[b,b+i,b+i,b];var r=true;var s,d,l;for(var c=0;c<4;c++){if(c==3){s=-(a[0]-a[c]);d=n[0]-n[c];l=-(s*n[c]+d*a[c])}else{s=-(a[c+1]-a[c]);d=n[c+1]-n[c];l=-(s*n[c]+d*a[c])}if(s*e+d*o+l>0){r=false}}return r};window.bt_bb_point_dist=function(t,_,i){var e=t.offset().top-b(window).scrollTop();var o=t.offset().left;var n=e+t.innerHeight();var a=o+t.innerWidth();if(_>o&&_<a&&i>e&&i<n){return Math.min(Math.min(Math.abs(i-e),Math.abs(i-n)),Math.min(Math.abs(_-o),Math.abs(_-a)))}else if(_>o&&_<a){return Math.min(Math.abs(i-e),Math.abs(i-n))}else if(i>e&&i<n){return Math.min(Math.abs(_-o),Math.abs(_-a))}else{return null}};window.bt_bb_get_closest=function(t,_,i){var e=1e5;var o=null;t.each(function(){var t=bt_bb_point_dist(b(this),_,i);if(t!=null&&t<=e){e=t;o=b(this)}});return o};window.bt_bb_get_position=function(t){var _=t.offset().top-b(window).scrollTop();var i=t.offset().left;var e=_+t.innerHeight();var o=i+t.innerWidth();if(bt_bb_mouse.y<_){var n="up"}else if(bt_bb_mouse.y>e){var n="down"}else if(bt_bb_mouse.x<i){var n="left"}else if(bt_bb_mouse.x>o){var n="right"}else{var n="inside"}return n};window.bt_bb_event=function(b){window.bt_bb_action=b;bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")};window.bt_bb_resize_dialog=function(t){var _=b(window).innerHeight();if(_<800){var i=Math.round(b(window).innerHeight()*.5)}else{var i=Math.round(b(window).innerHeight()*.65)}b("#bt_bb_dialog .bt_bb_dialog_content").css("max-height",i);b("#bt_bb_dialog").css("width",Math.round(b(window).width()*.5)+"px");var e=b("#bt_bb_dialog").width();b("#bt_bb_dialog").css({transform:"translateX("+Math.round(-e*.5)+"px)"})};window.bt_bb_resize_front_end_preview=function(t){b("#bt_bb_front_end_preview").css("width",Math.round(b(window).width()*.9)+"px");b("#bt_bb_front_end_preview").css("height",Math.round(b(window).innerHeight()*.8));var _=b("#bt_bb_front_end_preview").width();var i=b("#bt_bb_front_end_preview").height();b("#bt_bb_front_end_preview").css({transform:"translate("+Math.round(-_*.5)+"px,"+Math.round(-i*.5)+"px)"})};b(window).resize(function(){window.bt_bb_resize_dialog();window.bt_bb_resize_front_end_preview()})})(jQuery);var bt_bb_json_encode=function(b){var t=/[\b\t\n\f\r\\\"\/\u00A1-\uFFFF]/g;var _={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/"};t.lastIndex=0;return t.test(b)?'"'+b.replace(t,function(b){var t=_[b];return typeof t==="string"?t:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'};if(!String.prototype.startsWith){String.prototype.startsWith=function(b,t){t=t||0;return this.lastIndexOf(b,t)===t}}if(!String.prototype.endsWith){String.prototype.endsWith=function(b,t){var _=this.toString();if(typeof t!=="number"||!isFinite(t)||Math.floor(t)!==t||t>_.length){t=_.length}t-=b.length;var i=_.indexOf(b,t);return i!==-1&&i===t}}var bt_bb_create_dom_element=function(b,t){var _=document.createElement(b);var i;for(var e=0;e<t.length;e++){i=document.createAttribute(t[e][0]);i.value=t[e][1];_.setAttributeNode(i)}return _};